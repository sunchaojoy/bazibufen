<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…«å­—å‘½ç†åˆ†æç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .input-section {
            padding: 40px;
            background: #f7fafc;
            border-bottom: 1px solid #e2e8f0;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group select {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .calculate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .calculate-btn:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
        }

        .results-section {
            padding: 40px;
            display: none;
        }

        .results-section.active {
            display: block;
        }

        .result-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #667eea;
        }

        .result-card h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-card h2::before {
            content: '';
            width: 4px;
            height: 24px;
            background: #667eea;
            border-radius: 2px;
        }

        .si-zhu-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .pillar {
            text-align: center;
            padding: 20px;
            background: #f7fafc;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .pillar:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }

        .pillar-title {
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .pillar-ganzhi {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .pillar-nayin {
            color: #718096;
            font-size: 0.9rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .info-item {
            padding: 20px;
            background: #f7fafc;
            border-radius: 8px;
            border-left: 3px solid #4299e1;
        }

        .info-item h3 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .info-item p {
            color: #4a5568;
            line-height: 1.6;
        }

        .strength-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .strength-bar {
            flex: 1;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .strength-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78 0%, #38a169 100%);
            transition: width 1s ease;
        }

        .ten-gods-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }

        .ten-god-item {
            background: #edf2f7;
            padding: 15px 20px;
            border-radius: 8px;
            text-align: center;
            min-width: 120px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .ten-god-item:hover {
            border-color: #667eea;
            background: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }

        .ten-god-name {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .ten-god-count {
            color: #718096;
            font-size: 0.9rem;
        }

        .pattern-badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin: 5px;
        }

        .dayun-timeline {
            margin-top: 20px;
        }

        .dayun-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 15px;
            background: #f7fafc;
            border-radius: 8px;
            border-left: 4px solid #4299e1;
        }

        .dayun-age {
            font-weight: 600;
            color: #2d3748;
            min-width: 100px;
        }

        .dayun-ganzhi {
            font-size: 1.2rem;
            color: #4a5568;
            margin: 0 20px;
        }

        .dayun-quality {
            margin-left: auto;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .quality-high {
            background: #c6f6d5;
            color: #22543d;
        }

        .quality-medium {
            background: #feebc8;
            color: #744210;
        }

        .quality-low {
            background: #fed7d7;
            color: #742a2a;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #4a5568;
        }

        .loading-spinner {
            border: 4px solid #e2e8f0;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: #fed7d7;
            color: #742a2a;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #e53e3e;
        }

        .success-message {
            background: #c6f6d5;
            color: #22543d;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #38a169;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .si-zhu-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .results-section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>å…«å­—å‘½ç†åˆ†æç³»ç»Ÿ</h1>
            <p>ä¼ ç»Ÿå‘½ç†æ™ºæ…§ä¸ç°ä»£ç§‘æŠ€çš„å®Œç¾ç»“åˆ</p>
            <div style="margin-top: 15px; display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;">
                <span style="background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.9rem;">åŸºç¡€åˆ†æ</span>
                <span style="background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.9rem;">æ ¼å±€ç²¾é€š</span>
                <span style="background: rgba(102,126,234,0.8); padding: 5px 10px; border-radius: 15px; font-size: 0.9rem; font-weight: bold;">å®æˆ˜æŠ€æ³•</span>
            </div>
        </header>

        <section class="input-section">
            <form id="baziForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="name">å§“å</label>
                        <input type="text" id="name" name="name" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å">
                    </div>
                    <div class="form-group">
                        <label for="gender">æ€§åˆ«</label>
                        <select id="gender" name="gender" required>
                            <option value="">è¯·é€‰æ‹©æ€§åˆ«</option>
                            <option value="ç”·">ç”·</option>
                            <option value="å¥³">å¥³</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="birthDate">å‡ºç”Ÿæ—¥æœŸ</label>
                        <input type="date" id="birthDate" name="birthDate" required>
                    </div>
                    <div class="form-group">
                        <label for="birthTime">å‡ºç”Ÿæ—¶é—´</label>
                        <input type="time" id="birthTime" name="birthTime" required>
                    </div>
                </div>

                <!-- ç¬¬å››é˜¶æ®µå®æˆ˜æŠ€æ³•é€‰é¡¹ -->
                <div style="margin-top: 30px; padding: 20px; background: #f0f4f8; border-radius: 8px; border-left: 4px solid #667eea;">
                    <h3 style="margin-bottom: 15px; color: #2d3748;">ğŸ¯ ç¬¬å››é˜¶æ®µå®æˆ˜æŠ€æ³•é€‰é¡¹</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="analysisType">åˆ†æç±»å‹</label>
                            <select id="analysisType" name="analysisType">
                                <option value="basic">åŸºç¡€åˆ†æ</option>
                                <option value="pattern">æ ¼å±€ç²¾é€š</option>
                                <option value="practical" selected>å®æˆ˜æŠ€æ³•</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="liuNian">æµå¹´åˆ†æï¼ˆå¯é€‰ï¼‰</label>
                            <input type="text" id="liuNian" name="liuNian" placeholder="å¦‚ï¼šç”²è¾° 2024">
                        </div>
                    </div>

                    <!-- å®æˆ˜æŠ€æ³•æ–¹æ³•é€‰æ‹© -->
                    <div style="margin-top: 20px;">
                        <h4 style="margin-bottom: 10px; color: #4a5568;">é€‰æ‹©å®æˆ˜æŠ€æ³•æ–¹æ³•ï¼š</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                            <label style="display: flex; align-items: center; gap: 5px; background: white; padding: 8px; border-radius: 5px; border: 1px solid #e2e8f0;">
                                <input type="checkbox" name="methods" value="xiangfa" checked>
                                <span style="font-size: 0.9rem;">æ¢ç´¢é—¨å–è±¡æ³•</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; background: white; padding: 8px; border-radius: 5px; border: 1px solid #e2e8f0;">
                                <input type="checkbox" name="methods" value="jinglun" checked>
                                <span style="font-size: 0.9rem;">å‘½ç†ç²¾è®º</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; background: white; padding: 8px; border-radius: 5px; border: 1px solid #e2e8f0;">
                                <input type="checkbox" name="methods" value="qicai" checked>
                                <span style="font-size: 0.9rem;">å¦»è´¢ä¸“é¡¹åˆ†æ</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; background: white; padding: 8px; border-radius: 5px; border: 1px solid #e2e8f0;">
                                <input type="checkbox" name="methods" value="liunian" checked>
                                <span style="font-size: 0.9rem;">æµå¹´å®åŠ¡</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; background: white; padding: 8px; border-radius: 5px; border: 1px solid #e2e8f0;">
                                <input type="checkbox" name="methods" value="anli" checked>
                                <span style="font-size: 0.9rem;">æ¡ˆä¾‹éªŒè¯</span>
                            </label>
                        </div>
                    </div>
                </div>
                <button type="submit" class="calculate-btn" id="calculateBtn">
                    å¼€å§‹å…«å­—åˆ†æ
                </button>
            </form>
        </section>

        <section class="results-section" id="resultsSection">
            <div id="loadingIndicator" class="loading" style="display: none;">
                <div class="loading-spinner"></div>
                <p>æ­£åœ¨åˆ†ææ‚¨çš„å…«å­—å‘½ç†ï¼Œè¯·ç¨å€™...</p>
            </div>

            <div id="resultsContent"></div>
        </section>
    </div>

    <script>
        // æ³¨æ„ï¼šè¿™é‡Œæ˜¯å‰ç«¯æ¼”ç¤ºä»£ç ï¼Œå®é™…çš„å…«å­—è®¡ç®—éœ€è¦åœ¨åç«¯Node.jsç¯å¢ƒä¸­è¿è¡Œ
        // è¿™é‡Œæ¨¡æ‹Ÿäº†æ•´ä¸ªåˆ†ææµç¨‹ï¼Œå±•ç¤ºç”¨æˆ·ç•Œé¢å’Œäº¤äº’

        class BaziWebFrontend {
            constructor() {
                this.form = document.getElementById('baziForm');
                this.calculateBtn = document.getElementById('calculateBtn');
                this.resultsSection = document.getElementById('resultsSection');
                this.loadingIndicator = document.getElementById('loadingIndicator');
                this.resultsContent = document.getElementById('resultsContent');

                this.initEventListeners();
            }

            initEventListeners() {
                this.form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleCalculate();
                });
            }

            async handleCalculate() {
                const formData = new FormData(this.form);
                const inputData = {
                    name: formData.get('name'),
                    gender: formData.get('gender'),
                    birthDate: formData.get('birthDate'),
                    birthTime: formData.get('birthTime'),
                    analysisType: formData.get('analysisType'),
                    liuNian: formData.get('liuNian'),
                    methods: this.getSelectedMethods()
                };

                // éªŒè¯è¾“å…¥
                if (!this.validateInput(inputData)) {
                    return;
                }

                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                this.showLoading();

                try {
                    // æ ¹æ®åˆ†æç±»å‹è°ƒç”¨ä¸åŒçš„è®¡ç®—æ–¹æ³•
                    let result;
                    if (inputData.analysisType === 'practical') {
                        result = await this.mockPracticalAnalysis(inputData);
                    } else if (inputData.analysisType === 'pattern') {
                        result = await this.mockPatternAnalysis(inputData);
                    } else {
                        result = await this.mockBaziCalculation(inputData);
                    }

                    this.displayResults(result);
                } catch (error) {
                    this.showError('è®¡ç®—å¤±è´¥ï¼š' + error.message);
                } finally {
                    this.hideLoading();
                }
            }

            getSelectedMethods() {
                const checkboxes = document.querySelectorAll('input[name="methods"]:checked');
                return Array.from(checkboxes).map(cb => cb.value);
            }

            validateInput(inputData) {
                if (!inputData.gender) {
                    this.showError('è¯·é€‰æ‹©æ€§åˆ«');
                    return false;
                }
                if (!inputData.birthDate) {
                    this.showError('è¯·é€‰æ‹©å‡ºç”Ÿæ—¥æœŸ');
                    return false;
                }
                if (!inputData.birthTime) {
                    this.showError('è¯·é€‰æ‹©å‡ºç”Ÿæ—¶é—´');
                    return false;
                }
                return true;
            }

            showLoading() {
                this.loadingIndicator.style.display = 'block';
                this.calculateBtn.disabled = true;
                this.calculateBtn.textContent = 'åˆ†æä¸­...';
            }

            hideLoading() {
                this.loadingIndicator.style.display = 'none';
                this.calculateBtn.disabled = false;
                this.calculateBtn.textContent = 'å¼€å§‹å…«å­—åˆ†æ';
            }

            showError(message) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.textContent = message;
                this.form.appendChild(errorDiv);
                setTimeout(() => errorDiv.remove(), 5000);
            }

            showSuccess(message) {
                const successDiv = document.createElement('div');
                successDiv.className = 'success-message';
                successDiv.textContent = message;
                this.form.appendChild(successDiv);
                setTimeout(() => successDiv.remove(), 5000);
            }

            // æ¨¡æ‹Ÿå®æˆ˜æŠ€æ³•åˆ†æ
            async mockPracticalAnalysis(inputData) {
                await new Promise(resolve => setTimeout(resolve, 3000));

                const birthDateTime = `${inputData.birthDate} ${inputData.birthTime}`;
                const methods = inputData.methods;

                const results = {
                    basicInfo: {
                        name: inputData.name || 'ç”¨æˆ·',
                        gender: inputData.gender,
                        birthDate: new Date(inputData.birthDate).toLocaleDateString('zh-CN'),
                        birthTime: inputData.birthTime,
                        analysisType: 'å®æˆ˜æŠ€æ³•æ·±åº¦åˆ†æ',
                        methods: methods.map(m => this.getMethodName(m))
                    }
                };

                // æ ¹æ®é€‰æ‹©çš„æ–¹æ³•ç”Ÿæˆå¯¹åº”çš„åˆ†æç»“æœ
                if (methods.includes('xiangfa')) {
                    results.xiangfaAnalysis = {
                        title: 'æ¢ç´¢é—¨å–è±¡æ³•åˆ†æ',
                        images: [
                            { element: 'ç”²æœ¨', image: 'å‚å¤©å¤§æ ‘ã€æ ‹æ¢ä¹‹æ', interpretation: 'æ€§æ ¼æ­£ç›´å‘ä¸Šï¼Œæœ‰è´£ä»»æ‹…å½“ï¼Œé€‚åˆåšé¢†å¯¼å·¥ä½œ' },
                            { element: 'åˆç«', image: 'çƒˆæ—¥å½“ç©ºã€å…‰æ˜æ¸©æš–', interpretation: 'çƒ­æƒ…å¼€æœ—ï¼Œä¹äºåŠ©äººï¼Œæœ‰ç¤¾ä¼šå½±å“åŠ›' },
                            { element: 'æˆŒåœŸ', image: 'é«˜å±±åšåœŸã€åŒ…å®¹ä¸‡ç‰©', interpretation: 'ç¨³é‡è¸å®ï¼ŒåŒ…å®¹æ€§å¼ºï¼Œèƒ½æ‰¿æ‹…é‡ä»»' },
                            { element: 'å­æ°´', image: 'æ±Ÿæ²³æ¹–æµ·ã€æ™ºæ…§æµåŠ¨', interpretation: 'èªæ˜çµæ´»ï¼Œé€‚åº”æ€§å¼ºï¼Œæœ‰å•†ä¸šå¤´è„‘' }
                        ],
                        synthesis: 'ç»¼åˆå–è±¡ï¼šæ­¤å‘½ä¸ºæ ‹æ¢ä¹‹æé…å…‰æ˜æ¸©æš–ä¹‹è±¡ï¼Œåˆæœ‰åšé‡åŸºç¡€æ‰¿è½½ï¼Œæ˜¯å…¸å‹çš„æˆåŠŸäººå£«ä¹‹è±¡ï¼Œé€‚åˆåœ¨ç¤¾ä¼šä¸Šå‘æŒ¥é‡è¦ä½œç”¨ã€‚',
                        applications: ['èŒä¸šå‘å±•ï¼šé€‚åˆç®¡ç†ã€æ•™è‚²ã€å…¬ç›Šäº‹ä¸š', 'äººç”Ÿå®šä½ï¼šåº”ä»¥æœåŠ¡ç¤¾ä¼šã€å®ç°ä»·å€¼ä¸ºç›®æ ‡', 'å‘å±•ç­–ç•¥ï¼šç¨³æ‰ç¨³æ‰“ï¼Œä»¥å¾·æœäºº']
                    };
                }

                if (methods.includes('jinglun')) {
                    results.jinglunAnalysis = {
                        title: 'å‘½ç†ç²¾è®ºæ·±åº¦åˆ†æ',
                        corePrinciples: [
                            { principle: 'é˜´é˜³åè°ƒ', analysis: 'å‘½å±€ä¸­é˜´é˜³æ­é…è¾ƒä¸ºå’Œè°ï¼ŒåˆšæŸ”ç›¸æµï¼Œèƒ½é€‚åº”å„ç§ç¯å¢ƒ' },
                            { principle: 'äº”è¡Œæµé€š', analysis: 'äº”è¡Œç”Ÿå…‹è·¯å¾„æ¸…æ™°ï¼Œæ°”åŠ¿æµé€šï¼Œäººç”Ÿå‘å±•ç›¸å¯¹é¡ºç•…' },
                            { principle: 'ç”¨ç¥å¾—åŠ›', analysis: 'ç”¨ç¥ç«åœŸç›¸ç”Ÿï¼Œåœ¨å‘½å±€ä¸­æœ‰æ ¹æœ‰åŠ›ï¼Œèƒ½å‘æŒ¥ç§¯æä½œç”¨' }
                        ],
                        lifePattern: {
                            pattern: 'æœ¨ç«é€šæ˜æ ¼',
                            characteristics: ['èªæ˜å¥½å­¦', 'æ¸©æ–‡å°”é›…', 'æœ‰åˆ›é€ åŠ›', 'é€‚åˆæ–‡åŒ–äº‹ä¸š'],
                            development: 'é’å¹´æ—¶æœŸåŠªåŠ›å­¦ä¹ ç§¯ç´¯çŸ¥è¯†ï¼Œä¸­å¹´æ—¶æœŸå‘æŒ¥æ‰èƒ½è·å¾—æˆå°±ï¼Œæ™šå¹´äº«å—æ–‡åŒ–æˆæœ'
                        },
                        wisdom: ['çŸ¥å‘½è€Œä¸ºï¼Œé¡ºåŠ¿è€Œä¸º', 'ä»¥å¾·ä¿®èº«ï¼Œä»¥æ‰ç«‹ä¸š', 'å¹³è¡¡å‘å±•ï¼Œä¸å¯ååºŸ']
                    };
                }

                if (methods.includes('qicai')) {
                    results.qicaiAnalysis = {
                        title: 'å¦»è´¢ä¸“é¡¹åˆ†æ',
                        marriageAnalysis: {
                            spousePalace: 'æ—¥æ”¯æˆŒåœŸ',
                            spouseCharacter: 'ç¨³é‡è¸å®ã€æœ‰è´£ä»»æ„Ÿã€é¡¾å®¶',
                            marriageQuality: 'é…å¶å®«ä¸ºåœŸï¼Œæ—¥ä¸»æœ¨å…‹åœŸä¸ºè´¢ï¼Œæ„Ÿæƒ…åŸºç¡€è¾ƒå¥½',
                            marriageTiming: '25-30å²ä¸ºæœ€ä½³å©šæœŸï¼Œé…å¶å¤šåœ¨ä¸œæ–¹æˆ–å—æ–¹ç›¸é‡',
                            marriageAdvice: ['é€‰æ‹©å¯¹è±¡è¦é‡å¾·é‡æ‰', 'å©šå§»éœ€è¦ç»è¥å’Œç»´æŠ¤', 'å®¶åº­å’Œç¦æ˜¯äº‹ä¸šçš„åŸºç¡€']
                        },
                        wealthAnalysis: {
                            wealthElement: 'åœŸä¸ºæ­£è´¢',
                            wealthQuality: 'è´¢æ˜Ÿæœ‰æ ¹ï¼Œè´¢è¿ç¨³å®š',
                            wealthPath: 'é€šè¿‡ä¸“ä¸šæŠ€èƒ½å’ŒæœåŠ¡è·å¾—æ”¶å…¥',
                            wealthTiming: '35å²åè´¢è¿æ¸ä½³ï¼Œä¸­æ™šå¹´è´¢å¯Œä¸°åš',
                            wealthAdvice: ['æŠ€èƒ½ç«‹èº«æ˜¯æ ¹æœ¬', 'ç¨³å¥æŠ•èµ„ä¸å†’è¿›', 'æ•£è´¢ç§¯å¾·ç¦æŠ¥é•¿']
                        }
                    };
                }

                if (methods.includes('liunian')) {
                    const currentYear = new Date().getFullYear();
                    results.liunianAnalysis = {
                        title: 'æµå¹´å®åŠ¡åˆ†æ',
                        currentYear: {
                            year: currentYear,
                            ganzhi: this.getYearGanzhi(currentYear),
                            analysis: 'æµå¹´ä¸å‘½å±€å½¢æˆè¾ƒå¥½é…åˆï¼Œäº‹ä¸šå‘å±•æœºé‡è¾ƒå¤š',
                            opportunities: ['äº‹ä¸šæå‡æœºä¼š', 'äººé™…å…³ç³»æ”¹å–„', 'å­¦ä¹ è¿›ä¿®è‰¯æœº'],
                            challenges: ['æ³¨æ„å¥åº·é—®é¢˜', 'é˜²èŒƒè´¢åŠ¡é£é™©', 'é¿å…å†²åŠ¨å†³ç­–'],
                            monthlyFocus: [
                                { month: '1-3æœˆ', focus: 'è§„åˆ’å¸ƒå±€ï¼Œå¥ å®šåŸºç¡€' },
                                { month: '4-6æœˆ', focus: 'ç§¯æè¡ŒåŠ¨ï¼ŒæŠŠæ¡æœºé‡' },
                                { month: '7-9æœˆ', focus: 'ç¨³æ‰ç¨³æ‰“ï¼Œå·©å›ºæˆæœ' },
                                { month: '10-12æœˆ', focus: 'æ€»ç»“åæ€ï¼Œå‡†å¤‡æ¥å¹´' }
                            ]
                        }
                    };
                }

                if (methods.includes('anli')) {
                    results.anliAnalysis = {
                        title: 'æ¡ˆä¾‹éªŒè¯åˆ†æ',
                        similarCases: [
                            {
                                case: 'å†å²åäººA',
                                bazi: 'ç”²åˆ ä¸™æˆŒ ç”²æˆŒ å­æ—¶',
                                similarity: 'æ ¼å±€ç›¸ä¼¼åº¦ä¸º85%',
                                outcome: 'ä¸­å¹´æˆåï¼Œä¸€ç”Ÿå¯Œè´µ',
                                enlightenment: 'æ­¤å‘½æ ¼å†å²ä¸Šå¤šå‡ºæ–‡æ­¦å…¨æ‰ä¹‹äººç‰©'
                            },
                            {
                                case: 'ç°ä»£æˆåŠŸäººå£«B',
                                bazi: 'ç”²å¯… ä¸å¯ ç”²å­ ä¸‘æ—¶',
                                similarity: 'äº”è¡Œé…ç½®ç›¸ä¼¼åº¦ä¸º78%',
                                outcome: 'ä¼ä¸šå®¶ï¼Œç¤¾ä¼šçŸ¥åäººå£«',
                                enlightenment: 'ç°ä»£é€‚åˆåœ¨å•†ä¸šæˆ–ä¸“ä¸šé¢†åŸŸå‘å±•'
                            }
                        ],
                        validation: 'ç»è¿‡å†å²æ¡ˆä¾‹å’Œç°ä»£å®ä¾‹éªŒè¯ï¼Œæ­¤å‘½æ ¼å…·æœ‰æ˜æ˜¾çš„æˆåŠŸå€¾å‘ï¼Œåªè¦æŠŠæ¡æ—¶æœºï¼ŒåŠªåŠ›å¥‹æ–—ï¼Œå¿…æœ‰æ‰€æˆã€‚',
                        confidence: 'ç»¼åˆéªŒè¯ç½®ä¿¡åº¦ï¼š82%'
                    };
                }

                // ç»¼åˆå»ºè®®
                results.comprehensiveAdvice = {
                    summary: 'ç»¼åˆå„é¡¹å®æˆ˜æŠ€æ³•åˆ†æï¼Œæ­¤å‘½æ ¼ä¸ºä¸Šç­‰å‘½å±€ï¼Œå…·æœ‰æˆåŠŸäººå£«çš„å„é¡¹ç‰¹å¾ã€‚',
                    strengths: ['å¤©èµ‹è¾ƒå¥½', 'æœºé‡è¾ƒå¤š', 'æ€§æ ¼å®Œå–„', 'è¿åŠ¿é¡ºç•…'],
                    focus: ['å‘æŒ¥é¢†å¯¼æ‰èƒ½', 'æ³¨é‡çŸ¥è¯†ç§¯ç´¯', 'æŠŠæ¡æ—¶æœºè¡ŒåŠ¨', 'ç»´æŠ¤å®¶åº­å’Œè°'],
                    caution: ['ä¸å¯éª„å‚²è‡ªæ»¡', 'æ³¨æ„èº«ä½“å¥åº·', 'é˜²èŒƒäººé™…é£é™©', 'æŒç»­å­¦ä¹ æå‡']
                };

                return results;
            }

            // è·å–æ–¹æ³•åç§°
            getMethodName(method) {
                const names = {
                    'xiangfa': 'æ¢ç´¢é—¨å–è±¡æ³•',
                    'jinglun': 'å‘½ç†ç²¾è®º',
                    'qicai': 'å¦»è´¢ä¸“é¡¹åˆ†æ',
                    'liunian': 'æµå¹´å®åŠ¡',
                    'anli': 'æ¡ˆä¾‹éªŒè¯'
                };
                return names[method] || method;
            }

            // è·å–å¹´ä»½å¹²æ”¯
            getYearGanzhi(year) {
                const ganzhi = ['ç”²å­', 'ä¹™ä¸‘', 'ä¸™å¯…', 'ä¸å¯', 'æˆŠè¾°', 'å·±å·³', 'åºšåˆ', 'è¾›æœª', 'å£¬ç”³', 'ç™¸é…‰',
                               'ç”²æˆŒ', 'ä¹™äº¥', 'ä¸™å­', 'ä¸ä¸‘', 'æˆŠå¯…', 'å·±å¯', 'åºšè¾°', 'è¾›å·³', 'å£¬åˆ', 'ç™¸æœª',
                               'ç”²ç”³', 'ä¹™é…‰', 'ä¸™æˆŒ', 'ä¸äº¥', 'æˆŠå­', 'å·±ä¸‘', 'åºšå¯…', 'è¾›å¯', 'å£¬è¾°', 'ç™¸å·³',
                               'ç”²åˆ', 'ä¹™æœª', 'ä¸™ç”³', 'ä¸é…‰', 'æˆŠæˆŒ', 'å·±äº¥', 'åºšå­', 'è¾›ä¸‘', 'å£¬å¯…', 'ç™¸å¯',
                               'ç”²è¾°', 'ä¹™å·³', 'ä¸™åˆ', 'ä¸æœª', 'æˆŠç”³', 'å·±é…‰', 'åºšæˆŒ', 'è¾›äº¥', 'å£¬å­', 'ç™¸ä¸‘',
                               'ç”²å¯…', 'ä¹™å¯', 'ä¸™è¾°', 'ä¸å·³', 'æˆŠåˆ', 'å·±æœª', 'åºšç”³', 'è¾›é…‰', 'å£¬æˆŒ', 'ç™¸äº¥'];
                return ganzhi[(year - 4) % 60];
            }

            // æ¨¡æ‹Ÿæ ¼å±€ç²¾é€šåˆ†æ
            async mockPatternAnalysis(inputData) {
                await new Promise(resolve => setTimeout(resolve, 2500));

                return {
                    basicInfo: {
                        name: inputData.name || 'ç”¨æˆ·',
                        gender: inputData.gender,
                        birthDate: new Date(inputData.birthDate).toLocaleDateString('zh-CN'),
                        birthTime: inputData.birthTime,
                        analysisType: 'æ ¼å±€ç²¾é€šåˆ†æ'
                    },
                    patternAnalysis: {
                        mainPattern: {
                            name: 'æ­£å®˜æ ¼',
                            category: 'æ­£æ ¼',
                            quality: 'ä¸Šç­‰æ ¼å±€',
                            purity: 'çº¯å‡€åº¦85%',
                            feeling: 'æœ‰æƒ…åº¦90%',
                            strength: 'æœ‰åŠ›åº¦75%',
                            balance: 'å¹³è¡¡åº¦80%',
                            description: 'æ­£å®˜æ¸…çº¯ï¼Œæœ‰æƒ…æœ‰åŠ›ï¼Œæ˜¯å…¸å‹çš„è´µæ ¼ï¼Œä¸»äº‹ä¸šæˆåŠŸï¼Œç¤¾ä¼šåœ°ä½é«˜'
                        },
                        professionalAssessment: {
                            overall: 'ä¸Šç­‰æ ¼å±€',
                            characteristics: ['å®˜å°ç›¸ç”Ÿ', 'æ¸…æ­£å»‰æ´', 'æœ‰é¢†å¯¼æ‰èƒ½', 'ç¤¾ä¼šè®¤å¯åº¦é«˜'],
                            careerAdvice: ['é€‚åˆå…¬åŠ¡å‘˜', 'ä¼ä¸šç®¡ç†', 'ä¸“ä¸šæŠ€æœ¯äººå‘˜', 'æ•™è‚²å·¥ä½œè€…'],
                            developmentStage: '30å²åå¼€å§‹å±•ç°æ‰èƒ½ï¼Œä¸­å¹´è¾¾åˆ°äº‹ä¸šé«˜å³°'
                        }
                    },
                    comprehensiveAdvice: {
                        summary: 'æ ¼å±€æ¸…æ­£ï¼Œå‰ç¨‹è¿œå¤§',
                        focus: ['å‘æŒ¥ç®¡ç†æ‰èƒ½', 'æ³¨é‡å“å¾·ä¿®å…»', 'ç¨³æ‰ç¨³æ‰“å‘å±•'],
                        caution: ['é¿å…æ€¥åŠŸè¿‘åˆ©', 'æ³¨æ„äººé™…å…³ç³»']
                    }
                };
            }

            displayResults(result) {
                this.resultsSection.classList.add('active');

                let html = `
                    <!-- åŸºæœ¬ä¿¡æ¯ -->
                    <div class="result-card">
                        <h2>åŸºæœ¬ä¿¡æ¯</h2>
                        <div class="info-grid">
                            <div class="info-item">
                                <h3>å§“å</h3>
                                <p>${result.basicInfo.name}</p>
                            </div>
                            <div class="info-item">
                                <h3>æ€§åˆ«</h3>
                                <p>${result.basicInfo.gender}</p>
                            </div>
                            <div class="info-item">
                                <h3>å‡ºç”Ÿæ—¶é—´</h3>
                                <p>${result.basicInfo.birthDate} ${result.basicInfo.birthTime}</p>
                            </div>
                            <div class="info-item">
                                <h3>åˆ†æç±»å‹</h3>
                                <p>${result.basicInfo.analysisType || 'åŸºç¡€å…«å­—åˆ†æ'}</p>
                            </div>
                        </div>
                        ${result.basicInfo.methods ? `
                            <div class="info-item" style="margin-top: 15px;">
                                <h3>åˆ†ææ–¹æ³•</h3>
                                <p>${result.basicInfo.methods.join('ã€')}</p>
                            </div>
                        ` : ''}
                    </div>
                `;

                // å®æˆ˜æŠ€æ³•åˆ†æç»“æœ
                if (result.xiangfaAnalysis) {
                    html += `
                        <div class="result-card">
                            <h2>${result.xiangfaAnalysis.title}</h2>
                            <h3 style="color: #4a5568; margin: 20px 0 15px 0; font-size: 1.2rem;">æ ¸å¿ƒæ„è±¡è§£æ</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px;">
                                ${result.xiangfaAnalysis.images.map(img => `
                                    <div class="info-item" style="border-left: 4px solid #667eea;">
                                        <h4>${img.element}</h4>
                                        <p><strong>å–è±¡ï¼š</strong>${img.image}</p>
                                        <p><strong>è§£è¯»ï¼š</strong>${img.interpretation}</p>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="info-item">
                                <h3>ç»¼åˆæ„è±¡</h3>
                                <p>${result.xiangfaAnalysis.synthesis}</p>
                            </div>
                            <div class="info-item">
                                <h3>åº”ç”¨æŒ‡å¯¼</h3>
                                <ul style="margin-left: 20px; line-height: 1.8;">
                                    ${result.xiangfaAnalysis.applications.map(app => `<li>${app}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    `;
                }

                if (result.jinglunAnalysis) {
                    html += `
                        <div class="result-card">
                            <h2>${result.jinglunAnalysis.title}</h2>
                            <h3 style="color: #4a5568; margin: 20px 0 15px 0; font-size: 1.2rem;">æ ¸å¿ƒå‘½ç†åŸåˆ™</h3>
                            <div style="margin-bottom: 20px;">
                                ${result.jinglunAnalysis.corePrinciples.map(principle => `
                                    <div class="info-item" style="margin-bottom: 15px;">
                                        <h4>${principle.principle}</h4>
                                        <p>${principle.analysis}</p>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="info-item">
                                <h3>ç”Ÿå‘½æ ¼å±€æ¨¡å¼</h3>
                                <p><strong>æ ¼å±€ç±»å‹ï¼š</strong>${result.jinglunAnalysis.lifePattern.pattern}</p>
                                <p><strong>æ ¼å±€ç‰¹å¾ï¼š</strong>${result.jinglunAnalysis.lifePattern.characteristics.join('ã€')}</p>
                                <p><strong>å‘å±•è½¨è¿¹ï¼š</strong>${result.jinglunAnalysis.lifePattern.development}</p>
                            </div>
                            <div class="info-item">
                                <h3>äººç”Ÿæ™ºæ…§</h3>
                                <ul style="margin-left: 20px; line-height: 1.8;">
                                    ${result.jinglunAnalysis.wisdom.map(wis => `<li>${wis}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    `;
                }

                if (result.qicaiAnalysis) {
                    html += `
                        <div class="result-card">
                            <h2>${result.qicaiAnalysis.title}</h2>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div>
                                    <h3 style="color: #4a5568; margin-bottom: 15px;">å©šå§»åˆ†æ</h3>
                                    <div class="info-item">
                                        <p><strong>é…å¶å®«ï¼š</strong>${result.qicaiAnalysis.marriageAnalysis.spousePalace}</p>
                                        <p><strong>é…å¶ç‰¹å¾ï¼š</strong>${result.qicaiAnalysis.marriageAnalysis.spouseCharacter}</p>
                                        <p><strong>å©šå§»è´¨é‡ï¼š</strong>${result.qicaiAnalysis.marriageAnalysis.marriageQuality}</p>
                                        <p><strong>æœ€ä½³å©šæœŸï¼š</strong>${result.qicaiAnalysis.marriageAnalysis.marriageTiming}</p>
                                        <div style="margin-top: 10px;">
                                            <strong>å©šå§»å»ºè®®ï¼š</strong>
                                            <ul style="margin-left: 20px; margin-top: 5px;">
                                                ${result.qicaiAnalysis.marriageAnalysis.marriageAdvice.map(advice => `<li>${advice}</li>`).join('')}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <h3 style="color: #4a5568; margin-bottom: 15px;">è´¢å¯Œåˆ†æ</h3>
                                    <div class="info-item">
                                        <p><strong>è´¢æ˜Ÿï¼š</strong>${result.qicaiAnalysis.wealthAnalysis.wealthElement}</p>
                                        <p><strong>è´¢è¿è´¨é‡ï¼š</strong>${result.qicaiAnalysis.wealthAnalysis.wealthQuality}</p>
                                        <p><strong>è´¢å¯Œè·¯å¾„ï¼š</strong>${result.qicaiAnalysis.wealthAnalysis.wealthPath}</p>
                                        <p><strong>è´¢è¿æ—¶æœºï¼š</strong>${result.qicaiAnalysis.wealthAnalysis.wealthTiming}</p>
                                        <div style="margin-top: 10px;">
                                            <strong>è´¢å¯Œå»ºè®®ï¼š</strong>
                                            <ul style="margin-left: 20px; margin-top: 5px;">
                                                ${result.qicaiAnalysis.wealthAnalysis.wealthAdvice.map(advice => `<li>${advice}</li>`).join('')}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }

                if (result.liunianAnalysis) {
                    html += `
                        <div class="result-card">
                            <h2>${result.liunianAnalysis.title}</h2>
                            <div class="info-item">
                                <h3>${result.liunianAnalysis.currentYear.year}å¹´ ${result.liunianAnalysis.currentYear.ganzhi}</h3>
                                <p>${result.liunianAnalysis.currentYear.analysis}</p>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
                                <div class="info-item" style="border-left: 4px solid #48bb78;">
                                    <h4>å‘å±•æœºé‡</h4>
                                    <ul style="margin-left: 20px; line-height: 1.8;">
                                        ${result.liunianAnalysis.currentYear.opportunities.map(opp => `<li>${opp}</li>`).join('')}
                                    </ul>
                                </div>
                                <div class="info-item" style="border-left: 4px solid #f56565;">
                                    <h4>æ³¨æ„äº‹é¡¹</h4>
                                    <ul style="margin-left: 20px; line-height: 1.8;">
                                        ${result.liunianAnalysis.currentYear.challenges.map(chal => `<li>${chal}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                            <div class="info-item">
                                <h3>å­£åº¦é‡ç‚¹</h3>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                    ${result.liunianAnalysis.currentYear.monthlyFocus.map(month => `
                                        <div style="padding: 10px; background: #f7fafc; border-radius: 5px;">
                                            <strong>${month.month}ï¼š</strong>${month.focus}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                }

                if (result.anliAnalysis) {
                    html += `
                        <div class="result-card">
                            <h2>${result.anliAnalysis.title}</h2>
                            <h3 style="color: #4a5568; margin: 20px 0 15px 0; font-size: 1.2rem;">ç›¸ä¼¼æ¡ˆä¾‹å¯¹æ¯”</h3>
                            ${result.anliAnalysis.similarCases.map((case_, index) => `
                                <div class="info-item" style="margin-bottom: 20px;">
                                    <h4>æ¡ˆä¾‹${index + 1}ï¼š${case_.case}</h4>
                                    <p><strong>å…«å­—ï¼š</strong>${case_.bazi}</p>
                                    <p><strong>ç›¸ä¼¼åº¦ï¼š</strong>${case_.similarity}</p>
                                    <p><strong>äººç”Ÿç»“å±€ï¼š</strong>${case_.outcome}</p>
                                    <p><strong>å¯ç¤ºï¼š</strong>${case_.enlightenment}</p>
                                </div>
                            `).join('')}
                            <div class="info-item">
                                <h3>éªŒè¯ç»“è®º</h3>
                                <p>${result.anliAnalysis.validation}</p>
                                <p><strong>${result.anliAnalysis.confidence}</strong></p>
                            </div>
                        </div>
                    `;
                }

                // åŸºç¡€åˆ†æç»“æœï¼ˆå¤„ç†åŸæœ‰æ•°æ®ç»“æ„ï¼‰
                if (result.siZhu) {
                    html += this.generateBasicAnalysisHTML(result);
                }

                // ç»¼åˆå»ºè®®
                if (result.comprehensiveAdvice) {
                    html += `
                        <div class="result-card">
                            <h2>ç»¼åˆå»ºè®®</h2>
                            <div class="info-item">
                                <h3>æ€»ä½“è¯„ä»·</h3>
                                <p>${result.comprehensiveAdvice.summary}</p>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                <div class="info-item" style="border-left: 4px solid #48bb78;">
                                    <h4>ä¼˜åŠ¿ç‰¹å¾</h4>
                                    <ul style="margin-left: 20px; line-height: 1.8;">
                                        ${result.comprehensiveAdvice.strengths.map(str => `<li>${str}</li>`).join('')}
                                    </ul>
                                </div>
                                <div class="info-item" style="border-left: 4px solid #4299e1;">
                                    <h4>å‘å±•é‡ç‚¹</h4>
                                    <ul style="margin-left: 20px; line-height: 1.8;">
                                        ${result.comprehensiveAdvice.focus.map(foc => `<li>${foc}</li>`).join('')}
                                    </ul>
                                </div>
                                <div class="info-item" style="border-left: 4px solid #f56565;">
                                    <h4>æ³¨æ„äº‹é¡¹</h4>
                                    <ul style="margin-left: 20px; line-height: 1.8;">
                                        ${result.comprehensiveAdvice.caution.map(cau => `<li>${cau}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    `;
                }

                this.resultsContent.innerHTML = html;
                this.showSuccess('å…«å­—åˆ†æå®Œæˆï¼è¯·æŸ¥çœ‹è¯¦ç»†ç»“æœã€‚');
                this.resultsSection.scrollIntoView({ behavior: 'smooth' });
            }

            // ç”ŸæˆåŸºç¡€åˆ†æHTML
            generateBasicAnalysisHTML(result) {
                return `
                    <!-- å››æŸ±æ’ç›˜ -->
                    <div class="result-card">
                        <h2>å››æŸ±æ’ç›˜</h2>
                        <div class="si-zhu-grid">
                            <div class="pillar">
                                <div class="pillar-title">å¹´æŸ±</div>
                                <div class="pillar-ganzhi">å¹´</div>
                                <div class="pillar-nayin">${result.siZhu.yearPillar.description}</div>
                            </div>
                            <div class="pillar">
                                <div class="pillar-title">æœˆæŸ±</div>
                                <div class="pillar-ganzhi">æœˆ</div>
                                <div class="pillar-nayin">${result.siZhu.monthPillar.description}</div>
                            </div>
                            <div class="pillar">
                                <div class="pillar-title">æ—¥æŸ±</div>
                                <div class="pillar-ganzhi">æ—¥</div>
                                <div class="pillar-nayin">${result.siZhu.dayPillar.description}</div>
                            </div>
                            <div class="pillar">
                                <div class="pillar-title">æ—¶æŸ±</div>
                                <div class="pillar-ganzhi">æ—¶</div>
                                <div class="pillar-nayin">${result.siZhu.hourPillar.description}</div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            new BaziWebFrontend();
        });

        // è®¾ç½®ä»Šå¤©æ—¥æœŸä¸ºé»˜è®¤å€¼
        document.addEventListener('DOMContentLoaded', () => {
            const birthDateInput = document.getElementById('birthDate');
            if (birthDateInput) {
                const today = new Date().toISOString().split('T')[0];
                birthDateInput.max = today;
            }
        });
    </script>
</body>
</html>